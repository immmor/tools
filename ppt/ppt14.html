<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>immmor code：进阶工程指南</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/reveal.js/4.5.0/reveal.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/reveal.js/4.5.0/theme/white.min.css">
    <style>
        :root {
            --glass-bg: rgba(255, 255, 255, 0.4);
            --glass-border: rgba(255, 255, 255, 0.5);
            --accent: #6e57ff;
        }
        body { background: #f0f2f5; overflow: hidden; }
        #bg-canvas { position: fixed; top: 0; left: 0; z-index: 0; filter: blur(60px); opacity: 0.6; }
        .reveal { z-index: 1; }

        /* 毛玻璃容器 */
        .glass-container {
            background: var(--glass-bg) !important;
            backdrop-filter: blur(30px) !important;
            border: 1px solid var(--glass-border) !important;
            border-radius: 32px !important;
            padding: 40px !important;
            box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.1) !important;
            text-align: left !important;
        }

        h2 {
            background: linear-gradient(135deg, #2d3436 0%, #000 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            font-weight: 800 !important;
        }

        .step-label {
            display: inline-block;
            background: var(--accent);
            color: white;
            padding: 4px 12px;
            border-radius: 100px;
            font-size: 0.4em;
            margin-bottom: 15px;
            font-weight: 600;
        }

        .highlight-box {
            border-left: 4px solid var(--accent);
            background: rgba(110, 87, 255, 0.05);
            padding: 15px;
            margin-top: 20px;
            border-radius: 0 12px 12px 0;
        }
    </style>
</head>
<body>

    <canvas id="bg-canvas"></canvas>

    <div class="reveal">
        <div class="slides">

            <section>
                <div class="glass-container" style="text-align: center !important;">
                    <h1 style="font-weight: 900; letter-spacing: -2px;">immmor <span style="color: var(--accent);">code</span></h1>
                    <p style="color: #636e72;">从轻量级编辑到全栈 Web 生产力</p>
                    <div style="margin-top: 30px;">
                        <small>ADVANCED ENGINEERING PRESENTATION</small>
                    </div>
                </div>
            </section>

            <section>
                <div class="glass-container">
                    <span class="step-label">ARCHITECTURE</span>
                    <h2>智能状态快照</h2>
                    <p>利用源码中的 <code>localStorage</code> 深度集成：</p>
                    <ul>
                        <li class="fragment"><strong>View Persistence：</strong> 记录侧边栏宽度、终端开启状态及 AI 面板位置。</li>
                        <li class="fragment"><strong>Selection Store：</strong> 甚至能记住你上次光标所在的行号。</li>
                        <li class="fragment"><strong>Active Sync：</strong> 在多个标签页之间实时同步当前活跃文件。</li>
                    </ul>
                </div>
            </section>

            <section>
                <div class="glass-container">
                    <span class="step-label">AI CAPABILITY</span>
                    <h2>自定义 AI 指令矩阵</h2>
                    <p>源码中 <code>ai-ctx-options</code> 提供了强大的预设能力：</p>
                    <div style="display: flex; gap: 15px;">
                        <div class="highlight-box fragment" style="flex: 1;">
                            <strong>逻辑修复</strong><br><small>自动检测 Python 缩进错误与语法遗漏。</small>
                        </div>
                        <div class="highlight-box fragment" style="flex: 1;">
                            <strong>性能审计</strong><br><small>分析 WASM 运行效率，提出优化建议。</small>
                        </div>
                    </div>
                </div>
            </section>

            <section>
                <div class="glass-container">
                    <span class="step-label">FS INTEROP</span>
                    <h2>打破沙盒：文件互操作</h2>
                    <p><code>editor.html</code> 实现了浏览器与本地系统的无缝对接：</p>
                    <div class="fragment highlight-box">
                        <strong>外部 ZIP 挂载：</strong> 拖入即部署。源码中的 <code>JSZip.loadAsync</code> 会在内存中构建临时映射。
                    </div>
                    <div class="fragment highlight-box">
                        <strong>批量导出：</strong> 通过 <code>generateAsync({type:"blob"})</code>，瞬间将虚拟项目转化为实体工程。
                    </div>
                </div>
            </section>

            <section>
                <div class="glass-container">
                    <span class="step-label">STABILITY</span>
                    <h2>Web Worker 执行隔离</h2>
                    <p>这是 immmor 不会死机的原因：</p>
                    
                    <p><small>Pyodide 在独立的 Worker 线程中运行。即便你的 Python 代码执行耗时 10 秒，Monaco 编辑器依然保持 60FPS 的响应速度。</small></p>
                </div>
            </section>

            <section>
                <div class="glass-container">
                    <span class="step-label">EXTENSIBILITY</span>
                    <h2>插件渲染引擎</h2>
                    <p>源码函数 <code>renderPlugins()</code> 的逻辑：</p>
                    <p><small>它将插件 ID、图标和逻辑动态注入 DOM。这允许开发者在不修改核心代码的情况下，通过 <code>script</code> 注入实现：</small></p>
                    <ul>
                        <li><strong>自定义主题编辑器</strong></li>
                        <li><strong>实时数据看板</strong></li>
                        <li><strong>版本管理集成 (Git-lite)</strong></li>
                    </ul>
                </div>
            </section>

            <section>
                <h2 style="font-size: 3em;">Code with <span class="gradient-text" style="background: linear-gradient(45deg, #6e57ff, #ff4d4d); -webkit-background-clip: text; -webkit-text-fill-color: transparent;">Fluidity</span></h2>
                <p>体验不受限的浏览器编程</p>
            </section>

        </div>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/reveal.js/4.5.0/reveal.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <script>
        Reveal.initialize({ center: true, hash: true, transition: 'fade' });

        // Three.js 弥散流体背景
        const scene = new THREE.Scene();
        const camera = new THREE.PerspectiveCamera(75, window.innerWidth/window.innerHeight, 0.1, 1000);
        const renderer = new THREE.WebGLRenderer({ canvas: document.getElementById('bg-canvas'), antialias: true, alpha: true });
        renderer.setSize(window.innerWidth, window.innerHeight);

        const group = new THREE.Group();
        const colors = [0x6e57ff, 0xff4d4d, 0x00d2ff, 0xffd32a];
        
        for(let i=0; i<4; i++) {
            const geo = new THREE.SphereGeometry(2, 32, 32);
            const mat = new THREE.MeshBasicMaterial({ color: colors[i] });
            const sphere = new THREE.Mesh(geo, mat);
            sphere.position.set(Math.random()*10-5, Math.random()*6-3, Math.random()*5-10);
            group.add(sphere);
        }
        scene.add(group);
        camera.position.z = 5;

        function animate() {
            requestAnimationFrame(animate);
            group.children.forEach((s, i) => {
                s.position.x += Math.sin(Date.now()*0.001 + i)*0.01;
                s.position.y += Math.cos(Date.now()*0.001 + i)*0.01;
                s.scale.setScalar(1 + Math.sin(Date.now()*0.0005 + i)*0.2);
            });
            renderer.render(scene, camera);
        }
        animate();
    </script>
</body>
</html>