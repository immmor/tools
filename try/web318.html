<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <title>CyberDex | Blueprint v17</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/lightweight-charts/dist/lightweight-charts.standalone.production.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Courier+Prime:wght@400;700&family=Inter:wght@900&display=swap" rel="stylesheet">
    <style>
        :root { --ink: #1a1a1a; --paper: #f4f1ea; --accent: #0033ff; }
        body {
            background-color: var(--paper); color: var(--ink);
            font-family: 'Courier Prime', monospace; height: 100vh; overflow: hidden;
            background-image: 
                linear-gradient(rgba(0,0,0,0.05) 1px, transparent 1px),
                linear-gradient(90deg, rgba(0,0,0,0.05) 1px, transparent 1px);
            background-size: 50px 50px;
        }

        /* 建筑草图面板 */
        .blueprint-panel {
            border: 1px solid var(--ink);
            position: relative;
            background: transparent;
        }
        /* 装饰性的角标线 */
        .blueprint-panel::before {
            content: ''; position: absolute; top: -5px; left: -5px;
            width: 10px; height: 10px; border-top: 1px solid var(--ink); border-left: 1px solid var(--ink);
        }

        .sketch-btn {
            border: 1px solid var(--ink); padding: 10px 20px;
            font-weight: 700; transition: all 0.2s;
            text-transform: uppercase; letter-spacing: 2px;
        }
        .sketch-btn:hover { background: var(--ink); color: var(--paper); box-shadow: 5px 5px 0 var(--accent); }

        /* 标签标注样式 */
        .label-tag { font-size: 9px; background: var(--ink); color: var(--paper); padding: 2px 5px; }

        /* 日志容器限制 */
        .log-blueprint {
            flex: 1; height: 0; overflow-y: auto;
            border-top: 1px dashed var(--ink);
        }

        #tv_chart { width: 100%; height: 100%; filter: grayscale(1) contrast(1.1); mix-blend-mode: multiply; }
        
        .annotation { position: absolute; font-size: 8px; color: var(--accent); pointer-events: none; }
    </style>
</head>
<body class="p-6 flex flex-col gap-6">

    <header class="h-16 flex justify-between items-end border-b-2 border-black pb-2">
        <div class="flex items-baseline gap-4">
            <h1 class="text-3xl font-black tracking-tighter italic" style="font-family: 'Inter', sans-serif;">DEX_DRAFT.v17</h1>
            <span class="text-[10px] font-bold">[ SPEC: NEURAL_TRADING_ARCHITECTURE ]</span>
        </div>
        <div class="flex gap-8 text-[11px] font-bold">
            <div class="flex flex-col items-end">
                <span>COORD_X: 35.22</span>
                <span>COORD_Y: 108.91</span>
            </div>
            <div class="w-px h-8 bg-black"></div>
            <div class="flex flex-col items-end">
                <span>SCALE: 1:1.000</span>
                <span class="text-blue-700">AUTH: VERIFIED_ID</span>
            </div>
        </div>
    </header>

    <main class="flex-1 grid grid-cols-12 gap-6 overflow-hidden">
        
        <div class="col-span-3 flex flex-col gap-6">
            <div class="blueprint-panel p-5 flex-1 flex flex-col">
                <span class="label-tag mb-4 w-fit">COMPONENT_01: ASSETS</span>
                <div class="space-y-6 mt-4">
                    <div class="relative">
                        <div class="flex justify-between text-xs mb-1 uppercase font-bold"><span>Bitcoin_Vol</span><span>[ 64% ]</span></div>
                        <div class="h-0.5 w-full bg-gray-300"><div class="h-full bg-black" style="width: 64%"></div></div>
                        <span class="annotation" style="top: -12px; right: 0;">REF_L1</span>
                    </div>
                    <div class="relative">
                        <div class="flex justify-between text-xs mb-1 uppercase font-bold"><span>Ethereum_Vol</span><span>[ 32% ]</span></div>
                        <div class="h-0.5 w-full bg-gray-300"><div class="h-full bg-black" style="width: 32%"></div></div>
                        <span class="annotation" style="top: -12px; right: 0;">REF_L2</span>
                    </div>
                </div>
            </div>

            <div class="blueprint-panel p-5 h-48">
                <span class="label-tag mb-2 w-fit">COMPONENT_02: RADAR</span>
                <div class="w-full h-full flex items-center justify-center">
                    <div class="relative w-24 h-24 border border-black rounded-full flex items-center justify-center">
                        <div class="absolute inset-0 border-t border-blue-700 rounded-full animate-spin"></div>
                        <div class="w-full h-px bg-black opacity-20"></div>
                        <div class="h-full w-px bg-black opacity-20 absolute"></div>
                        <span class="text-[10px] font-bold">SCANNING</span>
                    </div>
                </div>
            </div>
        </div>

        <div class="col-span-6 flex flex-col gap-6 overflow-hidden">
            <div class="blueprint-panel flex-1 relative">
                <div class="absolute top-4 left-6 z-10 flex flex-col">
                    <span class="text-[10px] text-blue-700 font-bold tracking-widest uppercase">/ Market_Live_Stream /</span>
                    <h2 class="text-4xl font-black" id="price">98,241.50</h2>
                </div>
                <div id="tv_chart"></div>
            </div>
            
            <div class="h-24 grid grid-cols-4 gap-4">
                <div class="blueprint-panel p-3 flex flex-col justify-center items-center">
                    <span class="text-[9px] font-bold">GAS_PRC</span>
                    <span class="text-xl">12.00</span>
                </div>
                <div class="blueprint-panel p-3 flex flex-col justify-center items-center">
                    <span class="text-[9px] font-bold">SYNC_LAT</span>
                    <span class="text-xl">18MS</span>
                </div>
                <div class="col-span-2 blueprint-panel p-3 flex items-center justify-between px-6">
                    <div class="text-[10px] italic">"The architecture of finance is in constant flux."</div>
                    <div class="w-2 h-2 bg-blue-700 animate-ping"></div>
                </div>
            </div>
        </div>

        <div class="col-span-3 flex flex-col gap-6 overflow-hidden">
            <div class="blueprint-panel p-4 flex-1 flex flex-col overflow-hidden">
                <span class="label-tag mb-4 w-fit">COMPONENT_03: LOG_FEED</span>
                <div id="log_stream" class="log-blueprint text-[9px] pt-2 space-y-1">
                    </div>
            </div>

            <div class="blueprint-panel p-6 h-64 flex flex-col bg-white">
                <span class="label-tag mb-6 w-fit">EXECUTION_ORDER</span>
                <div class="space-y-4 flex-1">
                    <div class="border-l-2 border-black pl-4">
                        <span class="text-[10px] text-gray-400">INPUT_UNIT (ETH)</span>
                        <div class="text-2xl font-bold">1.000</div>
                    </div>
                    <div class="border-l-2 border-blue-700 pl-4">
                        <span class="text-[10px] text-gray-400">OUTPUT_UNIT (USDT)</span>
                        <div class="text-2xl font-bold text-blue-700">3,412.55</div>
                    </div>
                </div>
                <button class="sketch-btn mt-4 text-xs" onclick="alert('ORDER_SUBMITTED_TO_CONSTRUCTION_POOL')">
                    Confirm_Structure
                </button>
            </div>
        </div>
    </main>

    <script>
        // 1. K-Line Setup (Sketch Style)
        const container = document.getElementById('tv_chart');
        const chart = LightweightCharts.createChart(container, {
            layout: { background: { color: 'transparent' }, textColor: '#1a1a1a' },
            grid: { vertLines: { color: '#e5e5e5' }, horzLines: { color: '#e5e5e5' } },
            timeScale: { borderColor: '#1a1a1a' },
        });

        const candleSeries = chart.addSeries(LightweightCharts.CandlestickSeries, {
            upColor: '#1a1a1a', downColor: 'transparent',
            borderUpColor: '#1a1a1a', borderDownColor: '#1a1a1a',
            wickUpColor: '#1a1a1a', wickDownColor: '#1a1a1a',
            borderVisible: true,
        });

        let price = 98200;
        const data = [];
        let t = Math.floor(Date.now() / 1000) - 100 * 60;
        for(let i=0; i<100; i++) {
            price += (Math.random()-0.5)*40;
            data.push({ time: t + i*60, open: price-5, high: price+10, low: price-10, close: price });
        }
        candleSeries.setData(data);

        // Realtime Refresh
        setInterval(() => {
            const now = Math.floor(Date.now() / 1000);
            price += (Math.random()-0.5)*15;
            document.getElementById('price').innerText = price.toLocaleString('en-US', {minimumFractionDigits: 2});
            candleSeries.update({
                time: now - (now % 60),
                open: price-5, high: price+8, low: price-8, close: price
            });
        }, 1000);

        // 2. Log Stream Injection
        const logBox = document.getElementById('log_stream');
        const drafts = ["STRUCT_INTEGRITY_CHECK...", "MAPPING_LIQUIDITY_MAP...", "PARSING_CONTRACT_DRAFT...", "0x7a...VALIDATED", "DRAWING_NEW_BLOCK_COORD"];
        
        setInterval(() => {
            const entry = document.createElement('div');
            entry.innerText = `[${new Date().toLocaleTimeString()}] >> ${drafts[Math.floor(Math.random()*drafts.length)]}`;
            logBox.prepend(entry);
            if(logBox.children.length > 30) logBox.removeChild(logBox.lastChild);
        }, 1500);

        new ResizeObserver(() => chart.applyOptions({ width: container.clientWidth, height: container.clientHeight })).observe(container);
    </script>
</body>
</html>