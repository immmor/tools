<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <title>CyberDex | 8-Bit v18</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/lightweight-charts/dist/lightweight-charts.standalone.production.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap" rel="stylesheet">
    <style>
        :root { --pixel-green: #9bbc0f; --pixel-dark: #0f380f; --pixel-mid: #306230; --pixel-light: #8bac0f; }
        body {
            background-color: #222; color: var(--pixel-dark);
            font-family: 'Press Start 2P', cursive; height: 100vh; overflow: hidden;
            display: flex; align-items: center; justify-content: center;
        }

        /* 模拟掌机外壳 */
        .handheld-case {
            width: 95vw; height: 90vh; background: #888; border: 8px solid #666;
            border-radius: 20px 20px 100px 20px; padding: 40px;
            box-shadow: 20px 20px 0 #444; display: flex; flex-direction: column; gap: 20px;
        }

        /* 像素屏幕 */
        .pixel-screen {
            background-color: var(--pixel-green);
            border: 10px solid var(--pixel-dark);
            flex: 1; display: flex; flex-direction: column; padding: 20px;
            position: relative; overflow: hidden;
            image-rendering: pixelated;
        }

        /* 像素边框面板 */
        .pixel-panel {
            border: 4px solid var(--pixel-dark);
            background: rgba(139, 172, 15, 0.3);
            position: relative;
        }

        /* 模拟血条 (HP Bar) */
        .hp-bar-bg { height: 16px; background: var(--pixel-dark); padding: 2px; }
        .hp-bar-fill { height: 100%; background: var(--pixel-light); }

        /* 按钮 */
        .pixel-btn {
            background: var(--pixel-dark); color: var(--pixel-green);
            padding: 10px; font-size: 10px; border: none;
            box-shadow: 4px 4px 0 var(--pixel-mid);
            cursor: pointer; transition: transform 0.1s;
        }
        .pixel-btn:active { transform: translate(2px, 2px); box-shadow: 2px 2px 0 var(--pixel-mid); }

        /* 日志窗口 - 修复拉伸 */
        .log-pixel {
            flex: 1; height: 0; overflow-y: auto;
            font-size: 8px; line-height: 1.5;
        }
        .log-pixel::-webkit-scrollbar { width: 4px; }
        .log-pixel::-webkit-scrollbar-thumb { background: var(--pixel-dark); }

        #tv_chart { width: 100%; height: 100%; filter: sepia(100%) saturate(200%) hue-rotate(40deg) contrast(1.2); }
        
        .floating-pixel { position: absolute; width: 4px; height: 4px; background: var(--pixel-dark); opacity: 0.1; }
    </style>
</head>
<body>

    <div class="handheld-case">
        <div class="pixel-screen">
            <header class="h-12 flex justify-between items-center border-b-4 border-dark mb-4 pb-2">
                <div class="text-[12px] font-bold">LV.99 TRADER_OS</div>
                <div class="flex gap-4 items-center">
                    <span class="animate-pulse">● SAVING...</span>
                    <span id="clock" class="text-[10px]">12:00</span>
                </div>
            </header>

            <main class="flex-1 grid grid-cols-12 gap-4 overflow-hidden">
                
                <div class="col-span-3 flex flex-col gap-4 overflow-hidden">
                    <div class="pixel-panel p-3">
                        <div class="text-[8px] mb-2 uppercase italic">Player_Assets</div>
                        <div class="space-y-4">
                            <div>
                                <div class="flex justify-between text-[8px] mb-1"><span>BTC</span><span>75%</span></div>
                                <div class="hp-bar-bg"><div class="hp-bar-fill" style="width: 75%"></div></div>
                            </div>
                            <div>
                                <div class="flex justify-between text-[8px] mb-1"><span>ETH</span><span>25%</span></div>
                                <div class="hp-bar-bg"><div class="hp-bar-fill" style="width: 25%"></div></div>
                            </div>
                        </div>
                    </div>
                    <div class="pixel-panel p-3 flex-1 flex flex-col items-center justify-center gap-2">
                        <div class="text-[8px] uppercase">Market_Spirit</div>
                        <div class="text-4xl">☻</div>
                        <div class="text-[8px] text-center">FEAR_GREED: 64</div>
                    </div>
                </div>

                <div class="col-span-6 flex flex-col gap-4 overflow-hidden">
                    <div class="pixel-panel flex-1 relative overflow-hidden bg-white/20">
                        <div class="absolute top-4 left-4 z-10">
                            <div class="text-[8px] text-dark font-bold">BOSS: BTC/USDT</div>
                            <div class="text-xl font-bold mt-1" id="price">98241</div>
                        </div>
                        <div id="tv_chart"></div>
                    </div>
                    <div class="h-16 grid grid-cols-3 gap-2">
                        <div class="pixel-panel flex items-center justify-center text-[8px]">GAS: 12</div>
                        <div class="pixel-panel flex items-center justify-center text-[8px]">XP: +420</div>
                        <div class="pixel-panel flex items-center justify-center text-[8px] animate-bounce">BUY!!</div>
                    </div>
                </div>

                <div class="col-span-3 flex flex-col gap-4 overflow-hidden">
                    <div class="pixel-panel p-3 flex-1 flex flex-col overflow-hidden">
                        <div class="text-[8px] mb-2 border-b-2 border-dark pb-1">EVENT_LOG</div>
                        <div id="pixel_logs" class="log-pixel">
                            </div>
                    </div>

                    <div class="pixel-panel p-4 h-48 bg-dark/10">
                        <div class="text-[8px] mb-4">START_MISSION</div>
                        <div class="space-y-2 mb-4">
                            <div class="text-[10px]">IN: 1.0 ETH</div>
                            <div class="text-[10px]">OUT: 3412.5</div>
                        </div>
                        <button class="pixel-btn w-full" onclick="alert('MISSION ACCEPTED!')">PRESS START</button>
                    </div>
                </div>
            </main>

            <div class="absolute bottom-2 right-2 flex gap-4 opacity-20">
                <div class="w-8 h-8 rounded-full bg-black"></div>
                <div class="w-8 h-8 rounded-full bg-black"></div>
            </div>
        </div>
    </div>

    <script>
        // 1. K-Line Setup
        const container = document.getElementById('tv_chart');
        const chart = LightweightCharts.createChart(container, {
            layout: { background: { color: 'transparent' }, textColor: '#0f380f' },
            grid: { vertLines: { visible: false }, horzLines: { color: 'rgba(15, 56, 15, 0.1)' } },
            timeScale: { visible: false },
        });

        const candleSeries = chart.addSeries(LightweightCharts.CandlestickSeries, {
            upColor: '#0f380f', downColor: 'transparent',
            borderUpColor: '#0f380f', borderDownColor: '#0f380f',
            wickUpColor: '#0f380f', wickDownColor: '#0f380f',
        });

        let price = 98200;
        const data = [];
        let t = Math.floor(Date.now() / 1000) - 100 * 60;
        for(let i=0; i<100; i++) {
            price += (Math.random()-0.5)*40;
            data.push({ time: t + i*60, open: price-5, high: price+10, low: price-10, close: price });
        }
        candleSeries.setData(data);

        // Updates
        setInterval(() => {
            const now = Math.floor(Date.now() / 1000);
            price += (Math.random()-0.5)*15;
            document.getElementById('price').innerText = Math.floor(price);
            candleSeries.update({ time: now - (now % 60), open: price-5, high: price+8, low: price-8, close: price });
            document.getElementById('clock').innerText = new Date().toLocaleTimeString([], {hour: '2-digit', minute:'2-digit'});
        }, 1000);

        // 2. Pixel Logs
        const logBox = document.getElementById('pixel_logs');
        const events = ["WILD BULL APPEARED!", "GAINED 12 GWEI", "WALLET CONNECTED", "LEVEL UP!", "0x7A... JOINED PARTY"];
        setInterval(() => {
            const div = document.createElement('div');
            div.innerText = `> ${events[Math.floor(Math.random()*events.length)]}`;
            logBox.prepend(div);
            if(logBox.children.length > 20) logBox.removeChild(logBox.lastChild);
        }, 2000);

        new ResizeObserver(() => chart.applyOptions({ width: container.clientWidth, height: container.clientHeight })).observe(container);
    </script>
</body>
</html>