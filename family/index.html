<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>几何层级族谱</title>
    <style>
        :root {
            --level-1: #1a1a1a;
            --level-2: #3498db;
            --level-3: #f1c40f;
            --level-4: #e74c3c;
            --bg: #ffffff;
        }

        body {
            background-color: var(--bg);
            margin: 0;
            padding: 20px;
            font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif;
            color: #333;
        }

        .genealogy-container {
            max-width: 500px;
            margin: 0 auto;
        }

        .header {
            border-left: 8px solid var(--level-1);
            padding-left: 15px;
            margin-bottom: 40px;
        }

        .header h1 {
            font-size: 48px;
            margin: 0;
            letter-spacing: -1px;
            text-transform: uppercase;
        }

        /* 核心递归结构 */
        ul {
            list-style: none;
            padding: 0;
            margin: 0;
        }

        li {
            margin-bottom: 2px; /* 紧凑的几何感 */
        }

        /* 成员条目 */
        .member-bar {
            display: flex;
            align-items: stretch;
            background: #f8f9fa;
            cursor: pointer;
            transition: all 0.2s ease;
            min-height: 60px;
        }

        .member-bar:hover { background: #f0f2f5; }

        /* 头像容器 */
        .avatar-container {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: #e0e0e0;
            margin-right: 15px;
            flex-shrink: 0;
            display: flex;
            align-items: center;
            justify-content: center;
            overflow: hidden;
        }

        .avatar-placeholder {
            color: #999;
            font-size: 14px;
            font-weight: 600;
        }

        .member-info {
            flex-grow: 1;
        }

        /* 左侧色块层级指示器 */
        .color-indicator {
            width: 12px;
            flex-shrink: 0;
        }

        .content {
            flex-grow: 1;
            padding: 15px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        /* 头像样式 */
        .avatar-container {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: #e0e0e0;
            margin-right: 15px;
            flex-shrink: 0;
            display: flex;
            align-items: center;
            justify-content: center;
            overflow: hidden;
        }

        .avatar-placeholder {
            color: #999;
            font-size: 14px;
            font-weight: 600;
        }

        .member-info {
            flex-grow: 1;
        }

        .name {
            font-weight: 800;
            font-size: 18px;
            color: #1a1a1a;
        }

        .role {
            font-size: 11px;
            text-transform: uppercase;
            letter-spacing: 1px;
            color: #888;
            margin-top: 3px;
            display: block;
        }

        /* 状态图标 */
        .folder-icon {
            font-size: 12px;
            color: #ccc;
            transition: transform 0.3s ease;
        }

        /* 折叠逻辑 */
        .sub-group {
            display: none;
            padding-left: 20px; /* 关键：层级缩进 */
            border-left: 1px solid #eee;
        }

        /* 展开后的样式变化 */
        .item.expanded > .sub-group {
            display: block;
        }

        .item.expanded > .member-bar .folder-icon {
            transform: rotate(90deg);
            color: #333;
        }

        /* 不同代际的颜色定义 */
        .gen-1 { background-color: var(--level-1); }
        .gen-2 { background-color: var(--level-2); }
        .gen-3 { background-color: var(--level-3); }
        .gen-4 { background-color: var(--level-4); }

        /* 针对移动端的微调 */
        @media (max-width: 480px) {
            .name { font-size: 16px; }
            .content { padding: 12px; }
        }
    </style>
</head>
<body>

<div class="genealogy-container">
    <div class="header">
        <h1>王家族谱</h1>
        <!-- <p style="color: #888;">Modern Heritage System</p> -->
    </div>

    <ul id="genealogy-tree">
    </ul>
</div>

<script>
    // 家族成员数据
    const familyData = {
        "id": "root",
        "name": "王泽厚",
        "role": "第一代 · FOUNDER",
        "avatar": "王",
        "generation": 1,
        "children": [
            {
                "id": "member-1",
                "name": "王成林",
                "role": "第二代 · ARCHITECT",
                "avatar": "王",
                "generation": 2,
                "children": [
                    {
                        "id": "member-1-1",
                        "name": "王小云",
                        "role": "第三代 · DESIGNER",
                        "avatar": "王",
                        "generation": 3,
                        "children": []
                    }
                ]
            },
            {
                "id": "member-2",
                "name": "王成峰",
                "role": "第二代 · DIRECTOR",
                "avatar": "王",
                "generation": 2,
                "children": [
                    {
                        "id": "member-2-1",
                        "name": "王雨轩",
                        "role": "第三代 · ANALYST",
                        "avatar": "王",
                        "generation": 3,
                        "children": []
                    }
                ]
            }
        ]
    };

    // 生成族谱HTML结构
    function generateGenealogyTree(member, isRoot = false) {
        const hasChildren = member.children && member.children.length > 0;
        const generationClass = `gen-${member.generation}`;
        
        let html = `<li class="item ${isRoot ? 'expanded' : ''}">
            <div class="member-bar" onclick="toggle(this)">
                <div class="color-indicator ${generationClass}"></div>
                <div class="content">
                    <div class="avatar-container">
                        <span class="avatar-placeholder">${member.avatar}</span>
                    </div>
                    <div class="member-info">
                        <span class="name">${member.name}</span>
                        <span class="role">${member.role}</span>
                    </div>
                    ${hasChildren ? '<div class="folder-icon">▶</div>' : ''}
                </div>
            </div>`;
        
        if (hasChildren) {
            html += `<ul class="sub-group">`;
            member.children.forEach(child => {
                html += generateGenealogyTree(child);
            });
            html += `</ul>`;
        }
        
        html += `</li>`;
        return html;
    }

    // 初始化族谱
    function initGenealogy() {
        const treeContainer = document.getElementById('genealogy-tree');
        treeContainer.innerHTML = generateGenealogyTree(familyData, true);
    }

    // 折叠/展开功能
    function toggle(el) {
        const parent = el.closest('.item');
        if (parent.querySelector('.sub-group')) {
            parent.classList.toggle('expanded');
        }
    }

    // 页面加载完成后初始化
    document.addEventListener('DOMContentLoaded', initGenealogy);
</script>

</body>
</html>